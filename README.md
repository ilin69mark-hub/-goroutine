# Счетный семафор на языке Go

## Описание

Этот проект реализует счетный семафор на языке Go. Счетный семафор - это синхронизирующий объект, который позволяет ограничить количество потоков, имеющих доступ к ресурсу или пулу ресурсов.

## Отличие от двоичного семафора

- **Двоичный семафор**: может иметь только два состояния (0 или 1), эффективно действует как мьютекс
- **Счетный семафор**: может иметь значение больше 1, что позволяет контролировать доступ к нескольким одинаковым ресурсам

## Структура проекта

```
/workspace/
├── semaphore/
│   └── semaphore.go      # Реализация счетного семафора
├── main.go               # Основной пример (заменен на примеры демонстрации)
├── simple_demo.go        # Простая демонстрация работы семафора
├── final_demo.go         # Финальная демонстрация работы семафора
├── concurrent_demo.go    # Демонстрация работы с горутинами
├── go.mod                # Модуль Go
└── README.md             # Этот файл
```

## Реализованные методы

- `Acquire()` - захват одного разрешения у семафора
- `TryAcquire()` - попытка захвата разрешения без блокировки
- `Release()` - освобождение одного разрешения у семафора
- `AcquireN(n)` - захват N разрешений у семафора
- `ReleaseN(n)` - освобождение N разрешений у семафора
- `AvailablePermits()` - получение количества доступных разрешений

## Как запустить

1. Убедитесь, что у вас установлен Go
2. Перейдите в директорию проекта:
   ```bash
   cd /workspace
   ```
3. Запустите один из примеров:
   ```bash
   # Простая демонстрация
   go run simple_demo.go
   
   # Финальная демонстрация
   go run final_demo.go
   
   # Демонстрация с горутинами
   go run concurrent_demo.go
   ```

## Особенности реализации

- Использует канал как основу для хранения состояния семафора
- Содержит таймауты для предотвращения бесконечной блокировки
- Использует мьютекс для безопасного доступа к счетчику разрешений
- Поддерживает захват и освобождение нескольких разрешений за раз

## Применение

Счетные семафоры полезны в следующих случаях:
- Ограничение количества одновременных подключений к базе данных
- Ограничение количества одновременных HTTP-запросов
- Контроль доступа к пулу ресурсов (например, соединений с сервером)
- Ограничение количества одновременно выполняемых горутин

## Пример использования

```go
sem := semaphore.NewCountingSemaphore(5, 10*time.Second) // 5 разрешений, таймаут 10 секунд

// Захват одного разрешения
sem.Acquire()

// Освобождение разрешения
sem.Release()

// Захват нескольких разрешений
sem.AcquireN(3)

// Освобождение нескольких разрешений
sem.ReleaseN(3)
```